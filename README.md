# ATC-parsing

Air Traffic Control communications semantics parsing using CCG

## [Some examples](https://docs.google.com/spreadsheets/d/1Fr4dt8nmRrr1WSoAIHm-hq7fppCmUkuwXlGL64Xg2-g/edit?usp=sharing)

Here CCG parser from [NLTK](https://github.com/nltk) is used to parse ATC communications.

- *Column A* contains a set of manually selected short phrases that represent important phraseology in ATC domain.

- *Column C*. Each of these phrases (from *A*) was given to chatGPT with a request to generate realistic ATC communication examples related to the phrase.  Please note that chatGPT generates phrases with punctuation that split each phrase into semantically distinct segments but this punctuation was not used in the parsing process.

- *Column D*. CCG parser was used to parse all communications generated by chatGPT. Results are present here as JSON strings. You can use free [Online JSON Viewer](https://jsonviewer.stack.hu/) to look into any of these results.

Please note that many times internal structure extracted by the parser from ATC communications corresponds to structure given by punctuation. That supports the idea that the parser may extract important information about communication semantics.
The parser uses a lexicon specifically created for the domain. This lexicon is updated regularly to improve its coverage and accuracy.

Possible application may be related to the development of the human/autopilot interface.
We believe that the lexicon may be updated in a short time to make the parser applicable to any expansion of the ATC communication language to any specific domains. We are not sure that this is possible in the case of LLM models (chatGPT for example) used for ATC communication parsing. The reason is that LLM models requere training data that may be unavailable for new domains while in the case of semantic parsing all we need is just to update lexicon.

"""
The concept of placeholders is very important for the project. The idea is that in parsing time
we parse not original sentence but its variant where words/phrases are replaced by placeholders.

The total number of unique placeholders is significantly smaller than total number of unique
words/phrases that we can see in atc communications. These means that lexicon, that we use in parsing is small 
also and hence the parsing process hase smaller latency.

These are examples of a ATC communication, corresponding string of placeholders and mapping of placeholders
back into words/phrases from original communication.

Original (A) communication (punctuation is removed):

```Southwest 578 cleared to Atlanta via radar vectors then V222 to CRG then direct Climb and maintain 5000 expect 35000 ten minutes after departure Departure frequency 124.85 squawk 5263
```

Step 1 - placeholders:

```aircraft1 intnumber1 cleared1 to1 place1 via1 radar1 then1 route1 to2 fix1 then2 direction1 altitudechange1 intnumber2 expect1 intnumber3 wordnumber1 timeminsec1 after1 departure1 departure2 frequency1 realnumber1 squawk1 intnumber4
```

Step 1 - placeholedrs replacements

```aircraft1 : Southwest
intnumber1 : 578
cleared1 : cleared
to1 : to
place1 : Atlanta
via1 : via
radar1 : radar vectors
then1 :then
route1 : V222
to2 :to
fix1 : CRG
then2 :then
direction1 : direct
altitudechange1 : Climd and maintain
intnumber2 : 5000
expect1 : expect
intnumber3 : 35000
wordnumber1 : ten
timeminsec1 : minutes
after1 : after
departure1 : departure
departure2 : Departure
frequency1 : frequency
realnumber1 : 124.85
squawk1 : squawk
intnumber4 : 5263

```

Step 2 - placeholders:

```callsign1 cleared1 via1 radar1 then1 then2 altitudechange1 expect1 time1 after1 departure1 squawk1

```

Step 2 -- placeholder replacements

```callsign1 : _CALLSIGN_(_AIRCRAFT_(*Southwest*),_INTNUMBER_(*578*))
cleared1 : _CLEARED_(_CLEARED_(*cleared*),_TO_(*to*),_PLACE_(*Atlanta*))
via1 : _VIA_(*via*)
radar1 : _RADAR_(*radar vectors*)
then1 : _THEN_(_THEN_(*then*),_ROUTE_(_ROUTE_(*V222*),_TO_(*to*),_FIX_(*CRG*)))
then2 : _THEN_(_THEN_(*then*),_DIRECTION_(*direct*))
altitudechange1 : _ALTITUDECHANGE_(_ALTITUDECHANGE_(*Climb and maintain*),_INTNUMBER_(*5000*))
expect1 : _EXPECT_(_EXPECT_(*expect*),_INTNUMBER_(*35000*))
time1 : _TIME_(_WORDNUMBER_(*ten*),_TIMEMINSEC_(*minutes*))
after1 : _AFTER_(_AFTER_(*after*),_DEPARTURE_(*departure*))
departure1 : _DEPARTURE_(_DEPARTURE_(*Departure*),_FREQUENCY_(_FREQUENCY_(*frequency*),_REALNUMBER_(*124.85*)))
squawk1 : _SQUAWK_(_SQUAWK_(*squawk*),_INTNUMBER_(*5263*))
```

Step 3 placeholders

```callsign1 cleared1 then1 then2 altitudechange1 expect1 departure1 squawk1
```

Step 3 - placeholder replacements

```callsign1 : _CALLSIGN_(_AIRCRAFT_(*Southwest*),_INTNUMBER_(*578*))
cleared1 : _CLEARED_(_CLEARED_(_CLEARED_(_CLEARED_(*cleared*),_TO_(*to*),_PLACE_(*Atlanta*))),_VIA_(*via*),_RADAR_(*radar vectors*))
then1 : _THEN_(_THEN_(*then*),_ROUTE_(_ROUTE_(*V222*),_TO_(*to*),_FIX_(*CRG*)))
then2 : _THEN_(_THEN_(*then*),_DIRECTION_(*direct*))
altitudechange1 : _ALTITUDECHANGE_(_ALTITUDECHANGE_(*Climb and maintain*),_INTNUMBER_(*5000*))
expect1 : _EXPECT_(_EXPECT_(_EXPECT_(_EXPECT_(*expect*),_INTNUMBER_(*35000*))),_TIME_(_TIME_(_TIME_(_WORDNUMBER_(*ten*),_TIMEMINSEC_(*minutes*))),_AFTER_(_AFTER_(_AFTER_(*after*),_DEPARTURE_(*departure*)))))
departure1 : _DEPARTURE_(_DEPARTURE_(*Departure*),_FREQUENCY_(_FREQUENCY_(*frequency*),_REALNUMBER_(*124.85*)))
squawk1 : _SQUAWK_(_SQUAWK_(*squawk*),_INTNUMBER_(*5263*))
```

"""
